<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Roue de la Chance</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: radial-gradient(circle at center, #2c3e50, #000);
      color: white;
      text-align: center;
      padding: 40px;
    }
    h1 {
      margin-bottom: 20px;
    }
    #wheel {
      width: 200px;
      height: 200px;
      border: 10px solid white;
      border-radius: 50%;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      background-color: #111;
      transition: transform 4s ease-out;
    }
    button {
      padding: 15px 25px;
      font-size: 16px;
      background-color: #00aced;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:disabled {
      background-color: #555;
      cursor: not-allowed;
    }
    .retour {
      display: block;
      margin-top: 30px;
      color: #00aced;
      font-weight: bold;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h1>🎯 Roue de la chance</h1>
  <div id="wheel">🎁</div>
  <button id="spinButton">Tourner la roue</button>
  <p id="resultat"></p>
  <a class="retour" href="index.html">← Retour au menu</a>

  <script>
    const bouton = document.getElementById("spinButton");
    const wheel = document.getElementById("wheel");
    const resultat = document.getElementById("resultat");

    const roueSkins = [
      { id: "skin0", emoji: "🐱", nom: "Chat" },
      { id: "skin1", emoji: "🐶", nom: "Chien" },
      { id: "skin2", emoji: "🐸", nom: "Grenouille" },
      { id: "skin3", emoji: "🐧", nom: "Pingouin" },
      { id: "skin4", emoji: "🐰", nom: "Lapin" }
    ];

    const delay = 3600 * 1000; // 1 heure
    const lastSpin = localStorage.getItem("lastSpin");
    const now = Date.now();

    if (lastSpin && now - lastSpin < delay) {
      const minutes = Math.ceil((delay - (now - lastSpin)) / 60000);
      bouton.disabled = true;
      bouton.innerText = `Disponible dans ${minutes} min`;
    }

    bouton.onclick = () => {
      const skin = roueSkins[Math.floor(Math.random() * roueSkins.length)];

      wheel.style.transform = `rotate(${360 * 10 + Math.random() * 360}deg)`;
      bouton.disabled = true;
      bouton.innerText = "Veuillez patienter...";
      localStorage.setItem("lastSpin", Date.now());

      setTimeout(() => {
        let skins = JSON.parse(localStorage.getItem("skins") || "[]");
        if (!skins.includes(skin.id)) {
          skins.push(skin.id);
          localStorage.setItem("skins", JSON.stringify(skins));
          resultat.innerText = `🎉 Vous avez gagné le skin ${skin.nom} ${skin.emoji} !`;
        } else {
          resultat.innerText = `😅 Vous êtes tombé sur ${skin.nom} ${skin.emoji}, que vous aviez déjà.`;
        }
        bouton.innerText = "Disponible dans 60 min";
      }, 4000);
    };
  </script>
</body>
</html>
