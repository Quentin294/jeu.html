<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Succ√®s</title>
  <style>
    body {margin:0;font-family:Arial,sans-serif;background:#232b3b;color:#fff;}
    .container {max-width:700px;margin:40px auto 0 auto;background:#232b3bcc;border-radius:24px;box-shadow:0 8px 32px #000a;padding:40px 32px;}
    h1 {text-align:center;font-size:38px;margin-bottom:30px;}
    .progress-bar-bg {width:400px;height:16px;border-radius:8px;background:#111;margin:0 auto 30px auto;position:relative;}
    .progress-bar {height:16px;border-radius:8px;background:#3a6ee8;width:0;}
    .progress-label {position:absolute;left:50%;top:0;transform:translateX(-50%);font-size:14px;color:#fff;}
    .achievements-list {margin:0 auto;max-width:600px;}
    .achievement-row {display:flex;align-items:center;background:#232b3b;margin-bottom:18px;padding:14px 18px;border-radius:12px;box-shadow:0 2px 8px #0005;}
    .achievement-row.locked {opacity:0.4;}
    .achievement-icon {font-size:32px;margin-right:16px;}
    .achievement-title {font-size:18px;font-weight:bold;}
    .achievement-desc {font-size:14px;color:#ffe066;}
    .btn-menu {margin-top:28px;display:block;background:#3a6ee8;color:#fff;border:none;border-radius:12px;font-size:22px;padding:14px 36px;font-weight:bold;cursor:pointer;}
    .btn-menu:hover {background:#254a9c;}
  </style>
</head>
<body>
  <div class="container">
    <h1>Succ√®s</h1>
    <div class="progress-bar-bg">
      <div class="progress-bar" id="achvProgressBar"></div>
      <div class="progress-label" id="achvProgressLabel"></div>
    </div>
    <div class="achievements-list" id="achievementsList"></div>
    <button class="btn-menu" onclick="window.history.back()">&larr; Retour au menu</button>
  </div>
  <script>
    const ACHIEVEMENTS = [
      { id: "first_coin", icon: "ü™ô", title: "Premi√®re pi√®ce !", desc: "Ramasse ta premi√®re pi√®ce." },
      { id: "ten_coins", icon: "üí∞", title: "Collectionneur", desc: "Ramasse 10 pi√®ces en une partie." },
      { id: "hundred_xp", icon: "‚ö°", title: "XP 100", desc: "Atteins 100 XP en une partie." },
      { id: "survivor", icon: "üõ°Ô∏è", title: "Survivant", desc: "Atteins 200 de score sans mourir." },
      { id: "master_collector", icon: "üëë", title: "Ma√Ætre des pi√®ces", desc: "Ramasse 30 pi√®ces en une partie." }
    ];
    function renderAchievements() {
      let achievementsState = {};
      try {
        achievementsState = JSON.parse(localStorage.getItem("achievementsState") || "{}");
      } catch(e) {}
      for(const achv of ACHIEVEMENTS) {
        if(achievementsState[achv.id] === undefined) achievementsState[achv.id] = false;
      }
      const list = document.getElementById('achievementsList');
      list.innerHTML = '';
      for(const achv of ACHIEVEMENTS) {
        const unlocked = achievementsState[achv.id];
        list.innerHTML += `
          <div class="achievement-row${unlocked ? '' : ' locked'}">
            <div class="achievement-icon">${achv.icon}</div>
            <div class="achievement-info">
              <span class="achievement-title">${achv.title}</span>
              <span class="achievement-desc">${achv.desc}</span>
            </div>
          </div>
        `;
      }
      const total = ACHIEVEMENTS.length, unlocked = Object.values(achievementsState).filter(v=>v).length;
      const percent = Math.round(100*unlocked/total);
      document.getElementById('achvProgressBar').style.width = percent + "%";
      document.getElementById('achvProgressLabel').textContent = `${unlocked} / ${total} succ√®s (${percent}%)`;
    }
    renderAchievements();
    window.addEventListener('storage', function(event) {
      if(event.key === "achievementsState") renderAchievements();
    });
  </script>
</body>
</html>
