<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Passe Prestige</title>
  <style>
    body {
      background: linear-gradient(135deg, #19172a 70%, #3a6ee8 100%);
      color: #ffe066;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
    }
    .menu-bar {
      margin-top: 38px;
      display: flex;
      gap: 32px;
      background: rgba(35,43,59,0.98);
      border-radius: 20px;
      padding: 12px 32px;
      box-shadow: 0 4px 24px #0008;
      z-index: 2;
    }
    .menu-btn {
      background: none;
      border: none;
      color: #ffe066;
      font-size: 23px;
      font-weight: bold;
      letter-spacing: 1px;
      padding: 12px 34px;
      border-radius: 14px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.14s;
      position: relative;
      outline: none;
    }
    .menu-btn.active,
    .menu-btn:hover {
      background: linear-gradient(90deg, #ffe066 70%, #f8b400 100%);
      color: #232b3b;
      box-shadow: 0 4px 18px #ffe06655;
      transform: scale(1.08);
    }
    .header {
      margin-top: 38px;
      font-size: 46px;
      font-weight: bold;
      letter-spacing: 2px;
      text-shadow: 0 2px 16px #000a;
      color: #ffe066;
      text-align: center;
      margin-bottom: 0;
    }
    .passe-panel {
      background: rgba(35,43,59,0.98);
      border-radius: 30px;
      box-shadow: 0 8px 32px #000b;
      margin-top: 36px;
      padding: 44px 38px 38px 38px;
      min-width: 340px;
      max-width: 98vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 28px;
      animation: fadein 0.6s;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(40px);}
      to { opacity: 1; transform: none;}
    }
    .desc {
      font-size: 21px;
      color: #fff;
      text-align: center;
      margin-bottom: 10px;
      max-width: 380px;
      line-height: 1.6;
      letter-spacing: 0.2px;
      text-shadow: 0 2px 8px #0007;
    }
    .passe-container {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      justify-content: center;
      margin-top: 12px;
      margin-bottom: 12px;
      max-width: 800px;
    }
    .palier {
      background: #232b3b;
      border-radius: 18px;
      box-shadow: 0 2px 12px #0007;
      padding: 18px 20px;
      min-width: 120px;
      text-align: center;
      font-size: 18px;
      color: #ffe066;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: transform 0.12s;
    }
    .palier.recolte {
      background: linear-gradient(90deg, #ffe066 70%, #f8b400 100%);
      color: #232b3b;
      font-weight: bold;
      transform: scale(1.05);
      box-shadow: 0 4px 18px #ffe06688;
    }
    .palier.debloque {
      border: 2px solid #ffe066;
    }
    .palier .niveau {
      font-size: 16px;
      color: #fff;
      margin-bottom: 8px;
      font-weight: normal;
    }
    .palier .btn-recolter {
      margin-top: 8px;
      background: #3a6ee8;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 6px 20px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      box-shadow: 0 2px 8px #0005;
    }
    .palier .btn-recolter:hover {
      background: #254a9c;
      color: #ffe066;
    }
    .palier .recolte-ok {
      margin-top: 8px;
      color: #19e05e;
      font-size: 17px;
      font-weight: bold;
    }
    .palier.locked {
      opacity: 0.4;
      filter: grayscale(0.7);
    }
    .back-btn {
      position: fixed;
      bottom: 28px;
      left: 28px;
      background: linear-gradient(90deg,#ffe066 60%,#f8b400 100%);
      color: #232b3b;
      font-weight: bold;
      font-size: 18px;
      border: none;
      border-radius: 12px;
      padding: 12px 30px;
      cursor: pointer;
      box-shadow: 0 2px 12px #0007;
      transition: background 0.2s, color 0.2s, transform 0.12s;
      z-index: 10;
    }
    .back-btn:hover {
      background: #fff3a0;
      color: #19172a;
      transform: scale(1.05);
    }
    @media (max-width: 700px) {
      .header {font-size: 24px;}
      .menu-bar {gap: 10px;padding: 8px 2px;}
      .menu-btn {font-size: 15px;padding: 7px 10px;}
      .passe-panel {min-width: unset;max-width: 100vw;padding: 14px 4px 12px 4px;}
      .back-btn {font-size: 13px;padding: 8px 14px;left: 8px;bottom: 8px;}
      .desc {font-size: 13px;}
      .passe-container {gap: 8px;}
      .palier {padding: 10px 6px;min-width: 80px;font-size: 13px;}
    }
  </style>
</head>
<body>
  <div class="menu-bar">
    <button class="menu-btn active" onclick="window.location.href='prestige.html'">Prestige</button>
    <button class="menu-btn" onclick="window.location.href='boutique prestige.html'">Boutique Prestige</button>
  </div>
  <div class="header">Passe Prestige</div>
  <div class="passe-panel">
    <div class="desc">
      <b>À partir du niveau 500</b>, chaque palier de 100 niveaux te permet de récupérer <b>1 point de Prestige</b>.<br>
      Clique sur "Récupérer" à chaque palier atteint !<br>
      <span style="color:#ffe066;">Utilise-les ensuite dans la Boutique Prestige.</span>
    </div>
    <div class="passe-container" id="paliers"></div>
  </div>
  <button class="back-btn" onclick="window.location.href='menu-seigneurs.html'">← Retour au menu</button>
  <script>
    // Paramètres
    const PALIER_DEBUT = 500; // Début du passe prestige
    const PALIER_MAX = 2000; // Niveau max affiché (modifie selon tes besoins)
    // Récupère le niveau du joueur
    function getPlayerLevel() {
      return parseInt(localStorage.getItem("playerLevel") || "0");
    }
    // Liste des paliers déjà récoltés
    function getPrestigeRecoltes() {
      return JSON.parse(localStorage.getItem("prestigePointsRecoltes") || "[]");
    }
    function setPrestigeRecoltes(arr) {
      localStorage.setItem("prestigePointsRecoltes", JSON.stringify(arr));
    }
    // Met à jour le nombre de points dépensés (pour la boutique)
    function updatePrestigeDepenses() {
      let depenses = parseInt(localStorage.getItem("prestigePointsDepenses") || "0");
      let recoltes = getPrestigeRecoltes().length;
      localStorage.setItem("prestigePoints", recoltes - depenses);
    }
    // Affiche les paliers
    function afficherPaliers() {
      const container = document.getElementById('paliers');
      container.innerHTML = '';
      const level = getPlayerLevel();
      const recoltes = getPrestigeRecoltes();
      for(let palier=PALIER_DEBUT; palier<=PALIER_MAX; palier+=100) {
        let debloque = level >= palier;
        let recolte = recoltes.includes(palier);
        let div = document.createElement('div');
        div.className = 'palier' + (debloque ? ' debloque' : ' locked') + (recolte ? ' recolte' : '');
        div.innerHTML = `
          <div class="niveau">Niveau ${palier}</div>
          <div>+1 point Prestige</div>
        `;
        if(debloque && !recolte) {
          let btn = document.createElement('button');
          btn.className = 'btn-recolter';
          btn.textContent = 'Récupérer';
          btn.onclick = function() {
            recolterPoint(palier);
          };
          div.appendChild(btn);
        } else if(recolte) {
          div.innerHTML += `<div class="recolte-ok">Récupéré ✔</div>`;
        }
        container.appendChild(div);
      }
    }
    // Récupérer un point de prestige
    function recolterPoint(palier) {
      let recoltes = getPrestigeRecoltes();
      if(!recoltes.includes(palier)) {
        recoltes.push(palier);
        setPrestigeRecoltes(recoltes);
        updatePrestigeDepenses();
        afficherPaliers();
        alert('Point de Prestige récupéré pour le niveau ' + palier + ' !');
      }
    }
    // Initialisation
    afficherPaliers();
    updatePrestigeDepenses();
  </script>
</body>
</html>
