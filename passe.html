<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Passe de Combat</title>
  <style>
    body {
      background: #111;
      color: white;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .level {
      background: #222;
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .claimed {
      background: #444;
      color: #aaa;
    }
    .level span {
      font-size: 18px;
    }
    .reward {
      font-weight: bold;
    }
    button {
      padding: 10px 20px;
      background: #2ecc71;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button[disabled] {
      background: #777;
      cursor: default;
    }
  </style>
</head>
<body>
  <h1>Passe de Combat</h1>
  <div id="levels"></div>

  <script>
    const passData = JSON.parse(localStorage.getItem("passData") || "{}");
    const level = parseInt(localStorage.getItem("playerLevel") || "1");
    let currency = parseInt(localStorage.getItem("currency") || "0");

    const rewards = {
      1: "skin1",
      2: "skin2",
      3: "ðŸ’Ž x5",
      4: "skin3",
      5: "skin4",
      6: "skin5",
      7: "ðŸ’Ž x10",
      8: "skin6",
      9: "skin7",
      10: "skin8",
      11: "ðŸ’Ž x15",
      12: "ðŸ’Ž x20",
      13: "ðŸ’Ž x30",
      14: "ðŸ’Ž x40",
      15: "ðŸ’Ž x50"
    };

    const container = document.getElementById("levels");

    for (let i = 1; i <= 15; i++) {
      const levelDiv = document.createElement("div");
      levelDiv.classList.add("level");
      if (passData[i]) levelDiv.classList.add("claimed");

      const rewardText = document.createElement("span");
      rewardText.innerHTML = `Niveau ${i} â€“ <span class="reward">${rewards[i]}</span>`;
      levelDiv.appendChild(rewardText);

      const claimButton = document.createElement("button");
      claimButton.innerText = passData[i] ? "RÃ©clamÃ©" : "RÃ©clamer";
      claimButton.disabled = passData[i] || i > level;

      if (!passData[i] && i <= level) {
        claimButton.onclick = () => {
          passData[i] = true;
          localStorage.setItem("passData", JSON.stringify(passData));

          // Si câ€™est un skin, on l'ajoute dans les skins dÃ©bloquÃ©s
          if (rewards[i].startsWith("skin")) {
            const unlocked = JSON.parse(localStorage.getItem("unlockedSkins") || "[]");
            if (!unlocked.includes(rewards[i])) {
              unlocked.push(rewards[i]);
              localStorage.setItem("unlockedSkins", JSON.stringify(unlocked));
            }
          }

          // Si câ€™est une rÃ©compense de monnaie ðŸ’Ž
          if (rewards[i].includes("ðŸ’Ž")) {
            const amount = parseInt(rewards[i].replace(/[^\d]/g, ""));
            currency += amount;
            localStorage.setItem("currency", currency);
          }

          location.reload(); // rafraÃ®chir pour mettre Ã  jour l'affichage
        };
      }

      levelDiv.appendChild(claimButton);
      container.appendChild(levelDiv);
    }
  </script>
</body>
</html>
